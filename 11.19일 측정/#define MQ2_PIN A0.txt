#define MQ2_PIN A0
#define MQ3_PIN A1
#define MQ136_PIN A2
#define MQ137_PIN A3

#define MEASUREMENT_DURATION 180000 // 3 minutes in milliseconds

unsigned long startTime;
unsigned long currentTime;

void setup() {
  Serial.begin(9600);
  delay(1000);

  Serial.println("MQ Gas Sensor Data Logger");
  Serial.println("Press the reset button to start measurements.");

  while (!Serial) {
    // wait for serial port to connect.
  }

  startTime = millis();
}

void loop() {
  currentTime = millis();

  if ((currentTime - startTime) < MEASUREMENT_DURATION) {
    float mq2Value = analogRead(MQ2_PIN);
    float mq3Value = analogRead(MQ3_PIN);
    float mq136Value = analogRead(MQ136_PIN);
    float mq137Value = analogRead(MQ137_PIN);

    Serial.print(millis()); // Print timestamp
    Serial.print(",");
    Serial.print(mq2Value);
    Serial.print(",");
    Serial.print(mq3Value);
    Serial.print(",");
    Serial.print(mq136Value);
    Serial.print(",");
    Serial.println(mq137Value);

    delay(1000); // Adjust the delay based on your sensor's response time
  } else {
    Serial.println("Measurement complete.");

    while (1) {
      // Loop indefinitely after measurements are complete
    }
  }
}
